(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{477:function(t,_,s){"use strict";s.r(_);var a=s(56),r=Object(a.a)({},(function(){var t=this,_=t.$createElement,s=t._self._c||_;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"_1-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述"}},[t._v("#")]),t._v(" 1 概述")]),t._v(" "),s("h3",{attrs:{id:"_1-1-文档概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-文档概述"}},[t._v("#")]),t._v(" 1.1 文档概述")]),t._v(" "),s("p",[t._v("此文档将介绍钉钉集成SRM移动端的相关配置，主要包括钉钉开放平台配置和云SRM配置")]),t._v(" "),s("h2",{attrs:{id:"_2-配置说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置说明"}},[t._v("#")]),t._v(" 2 配置说明")]),t._v(" "),s("h3",{attrs:{id:"_2-1-srm配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-srm配置"}},[t._v("#")]),t._v(" 2.1 SRM配置")]),t._v(" "),s("h4",{attrs:{id:"_2-1-1-三方平台定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-三方平台定义"}},[t._v("#")]),t._v(" 2.1.1 三方平台定义")]),t._v(" "),s("p",[t._v("菜单路径：移动端管理-三方平台-三方平台定义")]),t._v(" "),s("p",[t._v("若没有对应平台，需要新建一个三方平台，若已有对应平台，直接使用已定义的三方平台即可")]),t._v(" "),s("p",[t._v("[注："),s("strong",[t._v("种子数据部署完成，此配置正常会自动生成")]),t._v(" ]")]),t._v(" "),s("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/thirdPlatformDing.png")}}),t._v(" "),s("ul",[s("li",[t._v("三方平台编码：dingdingMicroAppProxy")]),t._v(" "),s("li",[t._v("描述：钉钉微应用-代理平台")]),t._v(" "),s("li",[t._v("消息发送地址：https://oapi.dingtalk.com/topapi/message/corpconversation/asyncsend_v2")]),t._v(" "),s("li",[t._v("获取用户地址：https://oapi.dingtalk.com/gettoken")]),t._v(" "),s("li",[t._v("执行代码：此代码主要是回调三方，获取用户信息，并二次握手做安全性校验")])]),t._v(" "),s("h4",{attrs:{id:"_2-1-2-三方平台参数定义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-三方平台参数定义"}},[t._v("#")]),t._v(" 2.1.2 三方平台参数定义")]),t._v(" "),s("p",[t._v("菜单路径：移动端管理-三方平台-三方平台定义 -》 参数定义")]),t._v(" "),s("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/thirdPlatformDingParams.png")}}),t._v(" "),s("ul",[s("li",[t._v("REDIRECT_URL_TEMPLATE：REDIRECT_URL_TEMPLATE&microapp=CORP_ID   跳转地址模板（构造消息跳转链接时使用）")]),t._v(" "),s("li",[t._v("TOKEN_URL：https://oapi.dingtalk.com/gettoken   获取钉钉token地址")])]),t._v(" "),s("h4",{attrs:{id:"_2-1-3-三方平台运营号维护"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-3-三方平台运营号维护"}},[t._v("#")]),t._v(" 2.1.3 三方平台运营号维护")]),t._v(" "),s("p",[t._v("菜单路径：移动端管理-三方平台-三方平台运营号维护")]),t._v(" "),s("h5",{attrs:{id:"_2-1-3-1-新建一个三方运营账号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-3-1-新建一个三方运营账号"}},[t._v("#")]),t._v(" 2.1.3.1 新建一个三方运营账号")]),t._v(" "),s("br"),t._v(" "),s("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/thirdAccountDetailDing.png")}}),t._v(" "),s("ul",[s("li",[t._v("账号：非必输，SRM自动生成（若需要自定义，可以维护相应的值）")]),t._v(" "),s("li",[t._v("租户：选择企业微信对应的租户 "),s("front",{staticStyle:{color:"red"}},[t._v("*"),s("strong",[t._v("必输")])])],1),t._v(" "),s("li",[t._v("三方平台：选择步骤 2.1.1 中定义的钉钉微应用-代理平台（dingdingMicroAppProxy） "),s("front",{staticStyle:{color:"red"}},[t._v("*"),s("strong",[t._v("必输")])])],1),t._v(" "),s("li",[t._v("应用：根据实际使用，选择商城或者SRM")]),t._v(" "),s("li",[t._v("三方账号：应用AppKey【见步骤：2.2.4.1】 "),s("front",{staticStyle:{color:"red"}},[t._v("*"),s("strong",[t._v("必输")])])],1),t._v(" "),s("li",[t._v("三方密钥：应用AppSecret【见步骤：2.2.4.1】 "),s("front",{staticStyle:{color:"red"}},[t._v("*"),s("strong",[t._v("必输")])])],1),t._v(" "),s("li",[t._v("运营号描述：租户名称+钉钉微应用（例：甄云科技钉钉微应用） "),s("front",{staticStyle:{color:"red"}},[t._v("*"),s("strong",[t._v("必输")])])],1),t._v(" "),s("li",[t._v("备注：若无特别需要备注的，与运营号描述相同即可")]),t._v(" "),s("li",[t._v("平台运营账号：默认不开启（当租户为SRM平台时，可以开启，将当前三方运营号作为平台级运营账号使用）")]),t._v(" "),s("li",[t._v("自动绑定：默认不开启（当三方账号通过接口，在srm系统中同步生成子账号时，开启该功能可实现免登录）")]),t._v(" "),s("li",[t._v("启用：默认开启（当三方运营号不使用时，可禁用）")]),t._v(" "),s("li",[t._v("启用客户系统认证：默认不开启（当三方系统需要使用到自己的客户系统认证账号时，可开启该功能，并结合客户系统认证执行代码使用）")]),t._v(" "),s("li",[t._v("客户系统认证执行代码：客户系统认证流程，当"),s("strong",[t._v("启用客户系统认证")]),t._v("标识开启时需要维护")])]),t._v(" "),s("h5",{attrs:{id:"_2-1-3-2-获取三方运营账号生成的账号信息-用于回调地址的构造"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-3-2-获取三方运营账号生成的账号信息-用于回调地址的构造"}},[t._v("#")]),t._v(" 2.1.3.2 获取三方运营账号生成的账号信息，用于回调地址的构造")]),t._v(" "),s("p",[t._v("三方运营账号信息：xxxx")]),t._v(" "),s("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/thirdAccountDing.png")}}),t._v(" "),s("h4",{attrs:{id:"_2-1-4-三方运营参数配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-4-三方运营参数配置"}},[t._v("#")]),t._v(" 2.1.4 三方运营参数配置")]),t._v(" "),s("br"),t._v(" "),s("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/thirdAccountDingParam.png")}}),t._v(" "),s("ul",[s("li",[t._v("proxyUrl：代理域名（客户代理域名，转发请求到钉钉，解决钉钉出口ip不能被多企业配置问题） "),s("front",{staticStyle:{color:"red"}},[t._v("*"),s("strong",[t._v("必输")])])],1),t._v(" "),s("li",[t._v("AGENT_ID: 微应用AgentId（用于消息推送时，指定推送应用） "),s("front",{staticStyle:{color:"red"}},[t._v("*"),s("strong",[t._v("必输")])])],1),t._v(" "),s("li",[t._v("CORP_ID：企业Corpid（用于消息跳转时，构造跳转地址） "),s("front",{staticStyle:{color:"red"}},[t._v("*"),s("strong",[t._v("必输")])])],1),t._v(" "),s("li",[t._v("SEND_MESSAGE_URL：钉钉消息推送地址（若不配置，则取平台级推送地址，当使用客户代理域名时，需要单独配置租户级推送地址）")]),t._v(" "),s("li",[t._v("TODO_FLAG：推送钉钉待办标识（启用：1；不启用：0）")]),t._v(" "),s("li",[t._v("CREATE_TODO_URL：钉钉待办地址（推送工作流待办消息到钉钉待办）")]),t._v(" "),s("li",[t._v("UPDATE_TODO_URL：钉钉已办地址（推送工作流已办消息到钉钉，更新待办消息）")]),t._v(" "),s("li",[t._v("TODO_REDIRECT_URL_TEMPLATE：待办跳转模板")])]),t._v(" "),s("h3",{attrs:{id:"_2-2-钉钉管理平台配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-钉钉管理平台配置"}},[t._v("#")]),t._v(" 2.2 钉钉管理平台配置")]),t._v(" "),s("h4",{attrs:{id:"_2-2-1-登录钉钉管理平台官网"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-登录钉钉管理平台官网"}},[t._v("#")]),t._v(" 2.2.1 登录钉钉管理平台官网")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://oa.dingtalk.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("钉钉管理平台地址"),s("OutboundLink")],1)]),t._v(" "),s("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/dingding.png")}}),t._v(" "),s("h4",{attrs:{id:"_2-2-2-基本信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-基本信息"}},[t._v("#")]),t._v(" 2.2.2 基本信息")]),t._v(" "),s("p",[t._v("菜单路径：基本信息-开发信息（旧版）-企业自用账号信息")]),t._v(" "),s("p",[t._v("获取Cropid: xxxx")]),t._v(" "),s("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/dingdingBaseInfo.png")}}),t._v(" "),s("h4",{attrs:{id:"_2-2-3-企业自建应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-企业自建应用"}},[t._v("#")]),t._v(" 2.2.3 企业自建应用")]),t._v(" "),s("p",[t._v("菜单路径：工作台-自建应用 -》自建应用")]),t._v(" "),s("p",[t._v("应用类型：企业内部开发-H5微应用-》创建应用")]),t._v(" "),s("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/dingdingCreatApp.png")}}),t._v(" "),s("blockquote",[s("ul",[s("li",[t._v("应用名称：自定义")]),t._v(" "),s("li",[t._v("应用描述：自定义")]),t._v(" "),s("li",[t._v("应用图标：自定义")]),t._v(" "),s("li",[t._v("开发方式：企业自助开发")])])]),t._v(" "),s("h4",{attrs:{id:"_2-2-4-应用配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-4-应用配置"}},[t._v("#")]),t._v(" 2.2.4 应用配置")]),t._v(" "),s("p",[t._v("点击进入新建的应用")]),t._v(" "),s("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/dingdingApp.png")}}),t._v(" "),s("h5",{attrs:{id:"_2-2-4-1-获取应用agentid、appkey-和-appsecret"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-4-1-获取应用agentid、appkey-和-appsecret"}},[t._v("#")]),t._v(" 2.2.4.1 获取应用AgentId、AppKey 和 AppSecret")]),t._v(" "),s("br"),t._v(" "),s("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/dingdingAppBaseInfo.png")}}),t._v(" "),s("blockquote",[s("p",[t._v("凭证与基础信息")]),t._v(" "),s("ul",[s("li",[t._v("AgentId: xxxx")]),t._v(" "),s("li",[t._v("AppKey：xxxx")]),t._v(" "),s("li",[t._v("AppSecret：xxxx")])])]),t._v(" "),s("h5",{attrs:{id:"_2-2-4-2-开发管理配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-4-2-开发管理配置"}},[t._v("#")]),t._v(" 2.2.4.2 开发管理配置")]),t._v(" "),s("br"),t._v(" "),s("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/dingdingAppCreatInfo.png")}}),t._v(" "),s("blockquote",[s("p",[t._v("开发管理")]),t._v(" "),s("ul",[s("li",[t._v("开发模式：开发应用")]),t._v(" "),s("li",[t._v("服务器出口IP：后端工程服务器出口ip")]),t._v(" "),s("li",[t._v("应用首页地址：应用跳转的页面地址【见步骤：2.2.4.3】")])])]),t._v(" "),s("h5",{attrs:{id:"_2-2-4-3-工作台应用主页"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-4-3-工作台应用主页"}},[t._v("#")]),t._v(" 2.2.4.3 工作台应用主页")]),t._v(" "),s("blockquote",[s("p",[t._v("构造如下回调地址："),s("br"),t._v("\nhttps://xxx.xxx.isrm.going-link.com/WxCover?state=dingdingMicroAppProxy-xxxxxxxxxxxxxxx&microapp=xxxxxxxxxxxxx")])]),t._v(" "),s("p",[s("strong",[t._v("页面地址参数说明:")])]),t._v(" "),s("ul",[s("li",[t._v("https://xxx.xxx.isrm.going-link.com/WxCover 替换为对应环境移动前端代码路径")]),t._v(" "),s("li",[t._v("microapp：替换为钉钉Cropid【见步骤：2.2.2】")]),t._v(" "),s("li",[t._v("state：替换为dingdingMicroAppProxy-三方运营账号，【见步骤：2.1.3.2 截图中账号信息】")])]),t._v(" "),s("h5",{attrs:{id:"_2-2-4-4-版本与发布"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-4-4-版本与发布"}},[t._v("#")]),t._v(" 2.2.4.4 版本与发布")]),t._v(" "),s("br"),t._v(" "),s("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/dingdingAppVersionInfo.png")}}),t._v(" "),s("blockquote",[s("p",[t._v("版本与发布")]),t._v(" "),s("ul",[s("li",[t._v("可使用范围：添加可使用人员，用于开发过程中体验与测试（开发版本最多20人可见）")]),t._v(" "),s("li",[t._v("应用发布：发布后，该应用将会出现在钉钉的工作台上，企业组织内部的用户将会看到应用")])])])])}),[],!1,null,null,null);_.default=r.exports}}]);