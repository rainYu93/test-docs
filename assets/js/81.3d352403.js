(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{483:function(t,s,e){"use strict";e.r(s);var a=e(56),r=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"_1-概述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述"}},[t._v("#")]),t._v(" 1 概述")]),t._v(" "),e("h3",{attrs:{id:"_1-1-文档概述"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-文档概述"}},[t._v("#")]),t._v(" 1.1 文档概述")]),t._v(" "),e("p",[t._v("此文档将介绍企业微信集成SRM移动端的相关配置，主要包括企业微信配置和云SRM配置")]),t._v(" "),e("h2",{attrs:{id:"_2-配置说明"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-配置说明"}},[t._v("#")]),t._v(" 2 配置说明")]),t._v(" "),e("h3",{attrs:{id:"_2-1-srm配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-srm配置"}},[t._v("#")]),t._v(" 2.1 SRM配置")]),t._v(" "),e("h4",{attrs:{id:"_2-1-1-三方平台定义"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-三方平台定义"}},[t._v("#")]),t._v(" 2.1.1 三方平台定义")]),t._v(" "),e("p",[t._v("菜单路径：移动端管理-三方平台-三方平台定义")]),t._v(" "),e("p",[t._v("若没有对应平台，需要新建一个三方平台，若已有对应平台，直接使用已定义的三方平台即可")]),t._v(" "),e("p",[t._v("[注："),e("strong",[t._v("种子数据部署完成，此配置正常会自动生成")]),t._v(" ]")]),t._v(" "),e("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/thirdPlatformDetailEnterprise.png")}}),t._v(" "),e("ul",[e("li",[t._v("三方平台编码：wechatEnterprise")]),t._v(" "),e("li",[t._v("描述：企业微信")]),t._v(" "),e("li",[t._v("消息发送地址：https://qyapi.weixin.qq.com/cgi-bin/message/send")]),t._v(" "),e("li",[t._v("获取用户地址：https://qyapi.weixin.qq.com/cgi-bin/gettoken")]),t._v(" "),e("li",[t._v("执行代码：此代码主要是回调三方，获取用户信息，并二次握手做安全性校验")])]),t._v(" "),e("h4",{attrs:{id:"_2-1-2-三方平台参数定义"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-三方平台参数定义"}},[t._v("#")]),t._v(" 2.1.2 三方平台参数定义")]),t._v(" "),e("p",[t._v("菜单路径：移动端管理-三方平台-三方平台定义 -》 参数定义")]),t._v(" "),e("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/thirdPlatformParamsEnterprise.png")}}),t._v(" "),e("ul",[e("li",[t._v("REDIRECT_URL_TEMPLATE: 消息跳转地址模板（构造消息跳转链接时使用）"),e("br"),t._v("\nhttps://open.weixin.qq.com/connect/oauth2/authorize?appid=APP_ID&redirect_uri=REDIRECT_URL_TEMPLATE&response_type=code&scope=snsapi_base&state=#wechat_redirect")]),t._v(" "),e("li",[t._v("JSAPI_TICKET: https://qyapi.weixin.qq.com/cgi-bin/get_jsapi_ticket?access_token=ACCESS_TOKEN  获取企业微信签名地址")]),t._v(" "),e("li",[t._v("TOKEN_URL: https://api.weixin.qq.com/cgi-bin/token  获取企业微信token地址")])]),t._v(" "),e("h4",{attrs:{id:"_2-1-3-三方平台运营号维护"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-3-三方平台运营号维护"}},[t._v("#")]),t._v(" 2.1.3 三方平台运营号维护")]),t._v(" "),e("p",[t._v("菜单路径：移动端管理-三方平台-三方平台运营号维护")]),t._v(" "),e("h5",{attrs:{id:"_2-1-3-1-新建一个三方运营账号"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-3-1-新建一个三方运营账号"}},[t._v("#")]),t._v(" 2.1.3.1 新建一个三方运营账号")]),t._v(" "),e("br"),t._v(" "),e("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/thirdAccountDetailEnterprise.png")}}),t._v(" "),e("ul",[e("li",[t._v("账号：非必输，SRM自动生成（若需要自定义，可以维护相应的值）")]),t._v(" "),e("li",[t._v("租户：选择企业微信对应的租户 "),e("front",{staticStyle:{color:"red"}},[t._v("*"),e("strong",[t._v("必输")])])],1),t._v(" "),e("li",[t._v("三方平台：选择步骤 2.1.1 中定义的企业微信平台（wechatEnterprise） "),e("front",{staticStyle:{color:"red"}},[t._v("*"),e("strong",[t._v("必输")])])],1),t._v(" "),e("li",[t._v("应用：根据实际使用，选择商城或者SRM "),e("front",{staticStyle:{color:"red"}},[t._v("*"),e("strong",[t._v("必输")])])],1),t._v(" "),e("li",[t._v("三方账号：企业id【见步骤：2.2.2】 "),e("front",{staticStyle:{color:"red"}},[t._v("*"),e("strong",[t._v("必输")])])],1),t._v(" "),e("li",[t._v("三方密钥：自建应用Secret【见步骤：2.2.3.2】 "),e("front",{staticStyle:{color:"red"}},[t._v("*"),e("strong",[t._v("必输")])])],1),t._v(" "),e("li",[t._v("运营号描述：租户名称+企业微信（例：甄云科技企业微信） "),e("front",{staticStyle:{color:"red"}},[t._v("*"),e("strong",[t._v("必输")])])],1),t._v(" "),e("li",[t._v("备注：若无特别需要备注的，与运营号描述相同即可")]),t._v(" "),e("li",[t._v("平台运营账号：默认不开启（当租户为SRM平台时，可以开启，将当前三方运营号作为平台级运营账号使用）")]),t._v(" "),e("li",[t._v("自动绑定：默认不开启（当三方账号通过接口，在srm系统中同步生成子账号时，开启该功能可实现免登录）")]),t._v(" "),e("li",[t._v("启用：默认开启（当三方运营号不使用时，可禁用）")]),t._v(" "),e("li",[t._v("启用客户系统认证：默认不开启（当三方系统需要使用到自己的客户系统认证账号时，可开启该功能，并结合客户系统认证执行代码使用）")]),t._v(" "),e("li",[t._v("客户系统认证执行代码：客户系统认证流程，当"),e("strong",[t._v("启用客户系统认证")]),t._v("标识开启时需要维护")])]),t._v(" "),e("h5",{attrs:{id:"_2-1-3-2-获取三方运营账号生成的账号信息-用于回调地址的构造"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-3-2-获取三方运营账号生成的账号信息-用于回调地址的构造"}},[t._v("#")]),t._v(" 2.1.3.2 获取三方运营账号生成的账号信息，用于回调地址的构造")]),t._v(" "),e("p",[t._v("三方运营账号信息：xxxx")]),t._v(" "),e("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/thirdAccountEnterprise.png")}}),t._v(" "),e("h4",{attrs:{id:"_2-1-4-三方运营参数配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-4-三方运营参数配置"}},[t._v("#")]),t._v(" 2.1.4 三方运营参数配置")]),t._v(" "),e("br"),t._v(" "),e("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/thirdAccountEnterpriseParams.png")}}),t._v(" "),e("ul",[e("li",[t._v("AGENT_ID: 企业微信自建应用AgentId（用于消息推送时，指定推送应用） "),e("front",{staticStyle:{color:"red"}},[t._v("*"),e("strong",[t._v("必输")])])],1),t._v(" "),e("li",[t._v("REDIRECT_URL_TEMPLATE: 消息跳转地址模板（构造消息跳转链接时使用，优先级高于平台级配置，若不配置，则取平台级模板配置）"),e("br"),t._v("\nhttps://open.weixin.qq.com/connect/oauth2/authorize?appid=xxxxxx&redirect_uri=REDIRECT_URL_TEMPLATE&response_type=code&scope=snsapi_base&state=#wechat_redirect")])]),t._v(" "),e("h3",{attrs:{id:"_2-2-企业微信平台配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-企业微信平台配置"}},[t._v("#")]),t._v(" 2.2 企业微信平台配置")]),t._v(" "),e("h4",{attrs:{id:"_2-2-1-登录企业微信官网"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-登录企业微信官网"}},[t._v("#")]),t._v(" 2.2.1 登录企业微信官网")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://work.weixin.qq.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("企业微信官网地址"),e("OutboundLink")],1)]),t._v(" "),e("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/enterpriseWeChat.png")}}),t._v(" "),e("h4",{attrs:{id:"_2-2-2-我的企业"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-我的企业"}},[t._v("#")]),t._v(" 2.2.2 我的企业")]),t._v(" "),e("p",[t._v("菜单路径：我的企业-企业信息 -》企业ID")]),t._v(" "),e("p",[t._v("获取企业id：xxxxxx")]),t._v(" "),e("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/enterpriseWeChatMine.png")}}),t._v(" "),e("h4",{attrs:{id:"_2-2-3-企业自建应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-企业自建应用"}},[t._v("#")]),t._v(" 2.2.3 企业自建应用")]),t._v(" "),e("p",[t._v("菜单路径：应用管理-应用-自建-》创建应用")]),t._v(" "),e("h5",{attrs:{id:"_2-2-3-1-输入应用名称、介绍及logo-选择可见范围-点击创建应用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-1-输入应用名称、介绍及logo-选择可见范围-点击创建应用"}},[t._v("#")]),t._v(" 2.2.3.1 输入应用名称、介绍及LOGO，选择可见范围，点击创建应用")]),t._v(" "),e("br"),t._v(" "),e("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/enterpriseWeChatCreatApp.png")}}),t._v(" "),e("h5",{attrs:{id:"_2-2-3-2-点击进入上一步新建的应用-获取应用的agentid、secret"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-2-点击进入上一步新建的应用-获取应用的agentid、secret"}},[t._v("#")]),t._v(" 2.2.3.2 点击进入上一步新建的应用，获取应用的AgentId、Secret")]),t._v(" "),e("p",[t._v("AgentId:xxxx")]),t._v(" "),e("p",[t._v("Secret:xxxx")]),t._v(" "),e("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/enterpriseWeChatApp.png")}}),t._v(" "),e("h5",{attrs:{id:"_2-2-3-3-网页授权及js-sdk配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-3-网页授权及js-sdk配置"}},[t._v("#")]),t._v(" 2.2.3.3 网页授权及JS-SDK配置")]),t._v(" "),e("p",[t._v("菜单路径：开发者接口 -》申请域名校验")]),t._v(" "),e("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/enterpriseWeChatJS.png")}}),t._v(" "),e("p",[t._v("配置网页授权及JS-SDK,可信域名为移动服务器域名，例如: mobile.dev.isrm.going-link.com（云开发环境）")]),t._v(" "),e("p",[t._v("注："),e("em",[t._v("默认不需要申请校验域名，若需要使用企业微信sdk，则需申请校验域名，下载验证文件放在移动服务器域名根目录下，未明确要求则不进行校验，填写域名即可")])]),t._v(" "),e("blockquote",[e("p",[t._v("公有云项目服务器域名配置如下：")]),t._v(" "),e("ul",[e("li",[t._v("Dev环境：mobile.dev.isrm.going-link.com")]),t._v(" "),e("li",[t._v("Test环境：mobile.test.isrm.going-link.com")]),t._v(" "),e("li",[t._v("Pro环境：mobile.going-link.com")])])]),t._v(" "),e("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/enterpriseWeChatJSDetail.png")}}),t._v(" "),e("h5",{attrs:{id:"_2-2-3-4-工作台应用主页设置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-4-工作台应用主页设置"}},[t._v("#")]),t._v(" 2.2.3.4 工作台应用主页设置")]),t._v(" "),e("p",[t._v("应用主页跳转分为srm应用和商城应用，配置分别如下：")]),t._v(" "),e("blockquote",[e("p",[t._v("（1）srm应用主页地址："),e("br"),t._v("\nhttps://open.weixin.qq.com/connect/oauth2/authorize?appid=xxxx&redirect_uri=https%3A%2F%2Fmobile.dev.isrm.going-link.com%2FWxCover%2F&response_type=code&scope=snsapi_base&agentid=xxxx&state=wechatEnterprise-xxxx#wechat_redirect")])]),t._v(" "),e("blockquote",[e("p",[t._v("（2）商城应用主页地址："),e("br"),t._v("\nhttps://open.weixin.qq.com/connect/oauth2/authorize?appid=xxxx&redirect_uri=https%3A%2F%2Fmobile.dev.isrm.going-link.com%2FWxCover%2f%3fproxyService%3dMall&response_type=code&scope=snsapi_base&agentid=xxxx&state=wechatEnterprise-xxxx#wechat_redirect")])]),t._v(" "),e("p",[e("strong",[t._v("页面地址参数说明:")])]),t._v(" "),e("ul",[e("li",[t._v("appid：替换为企业微信的企业id【见步骤：2.2.2】")]),t._v(" "),e("li",[t._v("redirect_uri：替换为SRM方移动端跳转地址及固定入参")]),t._v(" "),e("li",[t._v("agentid：替换为企业微信自建应用AgentId【见步骤：2.2.3】")]),t._v(" "),e("li",[t._v("state：替换为wechatEnterprise-三方运营账号，【见步骤：2.1.3.2 截图中账号信息】")])]),t._v(" "),e("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/enterpriseWeChatApp.png")}}),t._v(" "),e("h4",{attrs:{id:"_2-2-4-工作台显示"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-4-工作台显示"}},[t._v("#")]),t._v(" 2.2.4 工作台显示")]),t._v(" "),e("p",[t._v("菜单路径：我的企业-设置-工作台显示")]),t._v(" "),e("p",[t._v("可以配置应用分组及位置")]),t._v(" "),e("img",{staticClass:"img-style",attrs:{src:t.$withBase("/assets/img/document/enterpriseWeChatMenu.png")}})])}),[],!1,null,null,null);s.default=r.exports}}]);